{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/\\u200F\\u200FScart3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/User/Desktop/\\u200F\\u200FScart3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{setAlert}from\"./alert\";import{GET_PROFILE,GET_PROFILES,PROFILE_ERROR,UPDATE_PROFILE,CLEAR_PROFILE,ACCOUNT_DELETED}from\"./types\";// Get current users profile\nexport var getCurrentProfile=function getCurrentProfile(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/profile/me\");case 3:res=_context.sent;dispatch({type:GET_PROFILE,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context.t0.response.statusText,status:_context.t0.response.status}});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// Get all profiles\nexport var getProfiles=function getProfiles(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:CLEAR_PROFILE});_context2.prev=1;_context2.next=4;return axios.get(\"/api/profile\");case 4:res=_context2.sent;dispatch({type:GET_PROFILES,payload:res.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context2.t0.response.statusText,status:_context2.t0.response.status}});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// Get profile by ID\nexport var getProfileById=function getProfileById(userId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"/api/profile/user/\".concat(userId));case 3:res=_context3.sent;dispatch({type:GET_PROFILE,payload:res.data});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context3.t0.response.statusText,status:_context3.t0.response.status}});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};// Create or update profile\nexport var createProfile=function createProfile(formData,history){var edit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;config={headers:{\"Content-Type\":\"application/json\"}};_context4.next=4;return axios.post(\"/api/profile\",formData,config);case 4:res=_context4.sent;dispatch({type:GET_PROFILE,payload:res.data});dispatch(setAlert(edit?\"Profile Successfully Updated!\":\"Profile Successfully Created!\",\"success\"));if(!edit){history.push(\"/dashboard\");}_context4.next=15;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);errors=_context4.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,\"danger\"));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context4.t0.response.statusText,status:_context4.t0.response.status}});case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[0,10]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};// Delete account & profile\nexport var deleteAccount=function deleteAccount(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!window.confirm(\"Are you sure? This can NOT be undone!\")){_context5.next=12;break;}_context5.prev=1;_context5.next=4;return axios.delete(\"/api/profile\");case 4:dispatch({type:CLEAR_PROFILE});dispatch({type:ACCOUNT_DELETED});dispatch(setAlert(\"Your account has been permanently deleted!\"));_context5.next=12;break;case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context5.t0.response.statusText,status:_context5.t0.response.status}});case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[1,9]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/User/Desktop/‏‏Scart3/client/src/actions/profile.js"],"names":["axios","setAlert","GET_PROFILE","GET_PROFILES","PROFILE_ERROR","UPDATE_PROFILE","CLEAR_PROFILE","ACCOUNT_DELETED","getCurrentProfile","dispatch","get","res","type","payload","data","msg","response","statusText","status","getProfiles","getProfileById","userId","createProfile","formData","history","edit","config","headers","post","push","errors","forEach","error","deleteAccount","window","confirm","delete"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\n\r\nimport { setAlert } from \"./alert\";\r\n\r\nimport {\r\n\r\n  GET_PROFILE,\r\n  GET_PROFILES,\r\n  PROFILE_ERROR,\r\n  UPDATE_PROFILE,\r\n  CLEAR_PROFILE,\r\n  ACCOUNT_DELETED\r\n} from \"./types\";\r\n\r\n// Get current users profile\r\nexport const getCurrentProfile = () => async dispatch => {\r\n\r\n  try {\r\n    const res = await axios.get(\"/api/profile/me\");\r\n\r\n    dispatch({\r\n      type: GET_PROFILE,\r\n      payload: res.data\r\n    });\r\n\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: {\r\n        msg: err.response.statusText,\r\n        status: err.response.status\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\n// Get all profiles\r\nexport const getProfiles = () => async dispatch => {\r\n\r\n  dispatch({ type: CLEAR_PROFILE });\r\n\r\n  try {\r\n    const res = await axios.get(\"/api/profile\");\r\n\r\n    dispatch({\r\n      type: GET_PROFILES,\r\n      payload: res.data\r\n    });\r\n\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: {\r\n        msg: err.response.statusText,\r\n        status: err.response.status\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\n// Get profile by ID\r\nexport const getProfileById = userId => async dispatch => {\r\n\r\n  try {\r\n    const res = await axios.get(`/api/profile/user/${userId}`);\r\n\r\n    dispatch({\r\n      type: GET_PROFILE,\r\n      payload: res.data\r\n    });\r\n  \r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: {\r\n        msg: err.response.statusText,\r\n        status: err.response.status\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\n\r\n// Create or update profile\r\nexport const createProfile = (\r\n  formData,\r\n  history,\r\n  edit = false\r\n) => async dispatch => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    };\r\n\r\n    const res = await axios.post(\"/api/profile\", formData, config);\r\n\r\n    dispatch({\r\n      type: GET_PROFILE,\r\n      payload: res.data\r\n    });\r\n\r\n    dispatch(setAlert(edit\r\n      ? \"Profile Successfully Updated!\"\r\n      : \"Profile Successfully Created!\",\r\n        \"success\"\r\n    ));\r\n\r\n    if (!edit) {\r\n      history.push(\"/dashboard\");\r\n    }\r\n  } catch (err) {\r\n    const errors = err.response.data.errors;\r\n\r\n    if (errors) {\r\n      errors.forEach(error => dispatch(setAlert(error.msg, \"danger\")));\r\n    }\r\n\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: {\r\n        msg: err.response.statusText,\r\n        status: err.response.status\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\n// Delete account & profile\r\nexport const deleteAccount = () => async dispatch => {\r\n\r\n  if (window.confirm(\"Are you sure? This can NOT be undone!\")) {\r\n    try {\r\n      await axios.delete(\"/api/profile\");\r\n\r\n      dispatch({ type: CLEAR_PROFILE });\r\n      dispatch({ type: ACCOUNT_DELETED });\r\n\r\n      dispatch(setAlert(\"Your account has been permanently deleted!\"));\r\n\r\n    } catch (err) {\r\n      dispatch({\r\n        type: PROFILE_ERROR,\r\n        payload: {\r\n          msg: err.response.statusText,\r\n          status: err.response.status\r\n        }\r\n      });\r\n    }\r\n  }\r\n};"]},"metadata":{},"sourceType":"module"}