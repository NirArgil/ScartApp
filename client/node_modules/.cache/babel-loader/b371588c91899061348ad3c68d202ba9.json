{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\\\u200F\\u200FScart3\\\\client\\\\src\\\\Shop.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useQuery } from 'react-query';\nimport React from \"react\"; //Components\n\nimport Item from './Item/Item';\nimport Cart from './Cart/Cart';\nimport Drawer from '@material-ui/core/Drawer';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Grid from '@material-ui/core/Grid';\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\nimport Badge from '@material-ui/core/Badge'; //Login\n\nimport setAuthToken from \"./utilities/setAuthToken\"; //Styles\n\nimport { Wrapper, StyledButton } from './App.styles'; //Type\n\nconst getProducts = async () => await (await fetch('https://fakestoreapi.com/products')).json();\n\nif (localStorage.token) {\n  setAuthToken(localStorage.token);\n}\n\nconst Shop = () => {\n  _s();\n\n  const [cartOpen, setCartOpen] = useState(false);\n  const [cartItems, setCartItems] = useState([]);\n  const {\n    data,\n    isLoading,\n    error\n  } = useQuery('products', getProducts);\n  console.log(data);\n\n  const getTotalItems = items => items.reduce((ack, item) => ack + item.amount, 0);\n\n  const handleAddToCart = clickedItem => {\n    setCartItems(prev => {\n      const isItemInCart = prev.find(item => item.id === clickedItem.id);\n\n      if (isItemInCart) {\n        return prev.map(item => item.id === clickedItem.id ? { ...item,\n          amount: item.amount + 1\n        } : item);\n      }\n\n      return [...prev, { ...clickedItem,\n        amount: 1\n      }];\n    });\n  };\n\n  const handleRemoveFromCart = id => {\n    setCartItems(prev => prev.reduce((ack, item) => {\n      if (item.id === id) {\n        if (item.amount === 1) return ack;\n        return [...ack, { ...item,\n          amount: item.amount - 1\n        }];\n      } else {\n        return [...ack, item];\n      }\n    }, []));\n  };\n\n  if (isLoading) return /*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Somethine went wrong ...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 19\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [/*#__PURE__*/_jsxDEV(Drawer, {\n      anchor: \"right\",\n      open: cartOpen,\n      onClose: () => setCartOpen(false),\n      children: /*#__PURE__*/_jsxDEV(Cart, {\n        cartItems: cartItems,\n        addToCart: handleAddToCart,\n        removeFromCart: handleRemoveFromCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(StyledButton, {\n      className: \"BTN\",\n      onClick: () => setCartOpen(true),\n      children: /*#__PURE__*/_jsxDEV(Badge, {\n        badgeContent: getTotalItems(cartItems),\n        color: \"error\",\n        children: /*#__PURE__*/_jsxDEV(AddShoppingCartIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      children: data === null || data === void 0 ? void 0 : data.map(item => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 4,\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          item: item,\n          handleAddToCart: handleAddToCart\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this)\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Shop, \"a576N+wQg6wlxYep1FfzmvDS5u8=\", false, function () {\n  return [useQuery];\n});\n\n_c = Shop;\nexport default Shop;\n\nvar _c;\n\n$RefreshReg$(_c, \"Shop\");","map":{"version":3,"sources":["C:/Users/User/Desktop/‏‏Scart3/client/src/Shop.tsx"],"names":["useState","useQuery","React","Item","Cart","Drawer","LinearProgress","Grid","AddShoppingCartIcon","Badge","setAuthToken","Wrapper","StyledButton","getProducts","fetch","json","localStorage","token","Shop","cartOpen","setCartOpen","cartItems","setCartItems","data","isLoading","error","console","log","getTotalItems","items","reduce","ack","item","amount","handleAddToCart","clickedItem","prev","isItemInCart","find","id","map","handleRemoveFromCart"],"mappings":"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","sourcesContent":["import { useState } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport React, { Fragment, useEffect } from \"react\";\r\n\r\n//Components\r\nimport Item from './Item/Item';\r\nimport Cart from './Cart/Cart';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\r\nimport Badge from '@material-ui/core/Badge';\r\n\r\n//Login\r\nimport Landing from \"./components/layout/Landing\";\r\nimport Routes from \"./components/routing/Routes\";\r\n\r\n// REDUX\r\nimport { Provider } from 'react-redux';\r\nimport store from \"./store\";\r\nimport { loadUser } from \"./actions/auth\";\r\nimport { register } from \"./actions/auth\";\r\nimport setAuthToken from \"./utilities/setAuthToken\";\r\n\r\n//Styles\r\nimport { Wrapper, StyledButton } from './App.styles';\r\n\r\n//Type\r\nexport type CartItemType = {\r\n    id: number;\r\n    category: string;\r\n    description: string;\r\n    image: string;\r\n    price: number;\r\n    title: string;\r\n    amount: number;\r\n  }\r\n\r\n\r\nconst getProducts = async (): Promise<CartItemType[]> =>\r\n  await (await fetch('https://fakestoreapi.com/products')).json();\r\n\r\n\r\n  if (localStorage.token) {\r\n    setAuthToken(localStorage.token);\r\n  }\r\n\r\nconst Shop = () => {\r\n  \r\n\r\n  const [cartOpen , setCartOpen] = useState (false);\r\n  const [cartItems, setCartItems] = useState([] as CartItemType[])\r\n  const { data,isLoading, error } = useQuery<CartItemType[]>(\r\n    'products',\r\n    getProducts \r\n    );\r\n  console.log(data);\r\n\r\nconst getTotalItems = (items: CartItemType[]) => \r\nitems.reduce((ack: number, item) => ack + item.amount, 0);\r\n  \r\nconst handleAddToCart = (clickedItem: CartItemType) => {\r\n   setCartItems(prev => {\r\n     const isItemInCart = prev.find(item => item.id === clickedItem.id);\r\n\r\n     if (isItemInCart) {\r\n       return prev.map( item => \r\n         item.id === clickedItem.id ?\r\n         {...item, amount: item.amount + 1}\r\n         : item\r\n       );\r\n     }\r\n       return [...prev, {...clickedItem, amount: 1 }];\r\n\r\n   });  \r\n};\r\n\r\nconst handleRemoveFromCart = (id: number) => {\r\n  setCartItems(prev => \r\n    prev.reduce((ack, item) => {\r\n     if (item.id === id) {\r\n       if(item.amount === 1) return ack;\r\n       return [...ack, {...item, amount: item.amount - 1}];\r\n     } else {\r\n      return [...ack, item];      \r\n     }\r\n    }, [] as CartItemType[])\r\n  );\r\n};\r\n\r\nif (isLoading) return <LinearProgress />;\r\nif (error) return <div>Somethine went wrong ...</div>;\r\n\r\nreturn (    \r\n  <Wrapper>\r\n    < Drawer anchor='right' open={cartOpen} onClose={() => setCartOpen(false)}>\r\n        <Cart \r\n        cartItems={cartItems} \r\n        addToCart={handleAddToCart} \r\n        removeFromCart={handleRemoveFromCart}\r\n        />\r\n    </Drawer>\r\n    <StyledButton className=\"BTN\" onClick={() => setCartOpen(true)} >\r\n        <Badge badgeContent = {getTotalItems(cartItems)} color=\"error\">\r\n        <AddShoppingCartIcon />\r\n        </Badge>\r\n    </StyledButton>\r\n    <Grid container spacing={3}>\r\n        {data?.map(item => (\r\n        <Grid item key= { item.id } xs={12} sm={4}>\r\n            <Item item={item} handleAddToCart={handleAddToCart}/>\r\n        </Grid>\r\n        ))}\r\n    </Grid>\r\n</Wrapper>\r\n  );   \r\n};\r\n\r\nexport default Shop;"]},"metadata":{},"sourceType":"module"}