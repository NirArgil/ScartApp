{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"C:/Users/User/Desktop/\\u200F\\u200FScart3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/User/Desktop/\\u200F\\u200FScart3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/User/Desktop/\\u200F\\u200FScart3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/Users/User/Desktop/\\u200F\\u200FScart3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/User/Desktop/\\u200F\\u200FScart3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useState}from'react';import{useQuery}from'react-query';import{BrowserRouter as Router,Route,Switch}from'react-router-dom';import React,{Fragment,useEffect}from\"react\";//Components\nimport LinearProgress from'@material-ui/core/LinearProgress';import Header from'./Header/Header';//Login\nimport Landing from\"./components/layout/Landing\";import Routes from\"./components/routing/Routes\";// REDUX\nimport{Provider}from'react-redux';import store from\"./store\";import{loadUser}from\"./actions/auth\";import setAuthToken from\"./utilities/setAuthToken\";//Styles\nvar getProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://fakestoreapi.com/products');case 2:_context.next=4;return _context.sent.json();case 4:return _context.abrupt(\"return\",_context.sent);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getProducts(){return _ref.apply(this,arguments);};}();if(localStorage.token){setAuthToken(localStorage.token);}var App=function App(){useEffect(function(){// dispatch the loadUser action by taking the 'store'\n// directly & call dispatch- a method in the 'store'\n// then pass the loadUser action in it to dispatch it.\n// To stop the 'userEffect HOOK' from running on a constant loop,\n// & only have it run once, when its mounted, we pass an empty\n// array [] as a 2nd argument. This now works like a 'componentDidMount'.\nstore.dispatch(loadUser());},[]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),cartOpen=_useState2[0],setCartOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cartItems=_useState4[0],setCartItems=_useState4[1];var _useQuery=useQuery('products',getProducts),data=_useQuery.data,isLoading=_useQuery.isLoading,error=_useQuery.error;console.log(data);var getTotalItems=function getTotalItems(items){return items.reduce(function(ack,item){return ack+item.amount;},0);};var handleAddToCart=function handleAddToCart(clickedItem){setCartItems(function(prev){var isItemInCart=prev.find(function(item){return item.id===clickedItem.id;});if(isItemInCart){return prev.map(function(item){return item.id===clickedItem.id?_objectSpread(_objectSpread({},item),{},{amount:item.amount+1}):item;});}return[].concat(_toConsumableArray(prev),[_objectSpread(_objectSpread({},clickedItem),{},{amount:1})]);});};var handleRemoveFromCart=function handleRemoveFromCart(id){setCartItems(function(prev){return prev.reduce(function(ack,item){if(item.id===id){if(item.amount===1)return ack;return[].concat(_toConsumableArray(ack),[_objectSpread(_objectSpread({},item),{},{amount:item.amount-1})]);}else{return[].concat(_toConsumableArray(ack),[item]);}},[]);});};if(isLoading)return/*#__PURE__*/_jsx(LinearProgress,{});if(error)return/*#__PURE__*/_jsx(\"div\",{children:\"Somethine went wrong ...\"});return/*#__PURE__*/_jsx(Provider,{store:store,children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:Landing}),/*#__PURE__*/_jsx(Route,{component:Routes})]})]})})});};export default App;","map":{"version":3,"sources":["C:/Users/User/Desktop/‏‏Scart3/client/src/App.tsx"],"names":["useState","useQuery","BrowserRouter","Router","Route","Switch","React","Fragment","useEffect","LinearProgress","Header","Landing","Routes","Provider","store","loadUser","setAuthToken","getProducts","fetch","json","localStorage","token","App","dispatch","cartOpen","setCartOpen","cartItems","setCartItems","data","isLoading","error","console","log","getTotalItems","items","reduce","ack","item","amount","handleAddToCart","clickedItem","prev","isItemInCart","find","id","map","handleRemoveFromCart"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { useQuery } from 'react-query';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport React, { Fragment, useEffect } from \"react\";\n\n//Components\nimport Item from './Item/Item';\nimport Cart from './Cart/Cart';\nimport Drawer from '@material-ui/core/Drawer';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Grid from '@material-ui/core/Grid';\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\nimport Badge from '@material-ui/core/Badge';\nimport Header from './Header/Header';\n\n//Login\nimport Landing from \"./components/layout/Landing\";\nimport Routes from \"./components/routing/Routes\";\n\n// REDUX\nimport { Provider } from 'react-redux';\nimport store from \"./store\";\nimport { loadUser } from \"./actions/auth\";\nimport { register } from \"./actions/auth\";\nimport setAuthToken from \"./utilities/setAuthToken\";\n\n//Styles\nimport { Wrapper, StyledButton } from './App.styles';\n\n//Type\nexport type CartItemType = {\n    id: number;\n    category: string;\n    description: string;\n    image: string;\n    price: number;\n    title: string;\n    amount: number;\n  }\n\n\nconst getProducts = async (): Promise<CartItemType[]> =>\n  await (await fetch('https://fakestoreapi.com/products')).json();\n\n\n  if (localStorage.token) {\n    setAuthToken(localStorage.token);\n  }\n\nconst App = () => {\n  useEffect(() => {\n    // dispatch the loadUser action by taking the 'store'\n    // directly & call dispatch- a method in the 'store'\n    // then pass the loadUser action in it to dispatch it.\n\n    // To stop the 'userEffect HOOK' from running on a constant loop,\n    // & only have it run once, when its mounted, we pass an empty\n    // array [] as a 2nd argument. This now works like a 'componentDidMount'.\n    store.dispatch(loadUser());\n  }, []);\n\n  const [cartOpen , setCartOpen] = useState (false);\n  const [cartItems, setCartItems] = useState([] as CartItemType[])\n  const { data,isLoading, error } = useQuery<CartItemType[]>(\n    'products',\n    getProducts \n    );\n  console.log(data);\n\nconst getTotalItems = (items: CartItemType[]) => \nitems.reduce((ack: number, item) => ack + item.amount, 0);\n  \nconst handleAddToCart = (clickedItem: CartItemType) => {\n   setCartItems(prev => {\n     const isItemInCart = prev.find(item => item.id === clickedItem.id);\n\n     if (isItemInCart) {\n       return prev.map( item => \n         item.id === clickedItem.id ?\n         {...item, amount: item.amount + 1}\n         : item\n       );\n     }\n       return [...prev, {...clickedItem, amount: 1 }];\n\n   });  \n};\n\nconst handleRemoveFromCart = (id: number) => {\n  setCartItems(prev => \n    prev.reduce((ack, item) => {\n     if (item.id === id) {\n       if(item.amount === 1) return ack;\n       return [...ack, {...item, amount: item.amount - 1}];\n     } else {\n      return [...ack, item];      \n     }\n    }, [] as CartItemType[])\n  );\n};\n\nif (isLoading) return <LinearProgress />;\nif (error) return <div>Somethine went wrong ...</div>;\n\nreturn ( \n<Provider store={store}>\n      <Router>\n        <Fragment>\n          \n         <Header />\n\n          <Switch>\n            <Route exact path=\"/\" component={Landing} />\n            <Route component={Routes} />\n          </Switch>\n        </Fragment>\n      </Router>\n    </Provider>\n  );   \n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}